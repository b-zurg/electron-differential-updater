# Quick start

## Install npm module

Install electron-differential-updater from npm.

```
  npm install electron-differential-updater --save
```

or through yarn

```
  yarn  add electron-differential-updater
```

## Configure publish

1. same as electron-updater [publish](https://www.electron.build/configuration/publish)
2. `useAppSupportCache` : enable updater cache location inside user app support directory instead of `~Library/Application Support/Caches/Electron-updater` for mac and same for win.

For Example

```
"publish": [
			{
				"provider": "generic",
				"url": "https://s3-us-west-2.amazonaws.com/test",
				"channel": "latest",
				"useMultipleRangeRequest": false,
				"useAppSupportCache": true
			}
		],

```

## Import electron-differential-updater

```
const { autoUpdater } = require("electron-differential-updater")

```

All the functionalities will be same as of [electron-updater](https://github.com/electron-userland/electron-builder/tree/master/packages/electron-updater) with added features.

1. Mac differential update on zip
2. same download-progress event will work for differential update for win(nsis) and mac(zip).
3. useAppSupportCache option enable updater cache location to user app support directory.

## Main Issues/Features implemented in this module

1.  [2114](https://github.com/electron-userland/electron-builder/issues/2114) - Mac Differential update
2.  [2521](https://github.com/electron-userland/electron-builder/issues/2521) - Progress bar events for differential update
3.  [4769](https://github.com/electron-userland/electron-builder/issues/4769) - Update location can be moved to user App support path

# Mac differential update(zip supported,In Progress)

For differential update to work, the module needs blockmap.The blocamap can be generated after the successfull build of mac(zip) through [electron-builder](https://github.com/electron-userland/electron-builder).

The function assumes app location will be `/dist/mac/*.app` and
app name will be [productName](https://www.electron.build/configuration/configuration) inside build object in package.json

```
const { generateZipandBlockmap } = require('@imjs/electron-differential-updater');
generateZipandBlockmap()
```

This function will do 3 things:- Logic to move app zip to electron-updater cache location as part of utils.(mac)

1. generate the zip with ditto(as the zip generated by electron builder does not work). [Issue 4229](https://github.com/electron-userland/electron-builder/issues/4299)
2. generate blockmap for differential update.
3. update latest-mac.yml sha with newly generated zip sha.

### In Progress - Logic to move app zip to electron-updater cache location as part of utils.(mac) [Issue #4](https://github.com/imjsElectron/electron-differential-updater/issues/4)

# Future Roadmap

1. Logic to move app zip to electron-updater cache location as part of utils.(mac)
2. Differential update for dmg.

# Contributions

1. Please raise the issue and make pull request if you want to contribute.
2. Local setup -

```

#Install Deps
yarn

##Compile
yarn:win or yarn:mac

##Link locally
yarn link
yarn link @imjs/electron-differential-updater

```

# Special Thanks

To [Devlar](https://github.com/develar) and [electron-builder](https://github.com/electron-userland/electron-builder) community.

# Maintainers ðŸš€

People maintaining this project.

<!-- prettier-ignore -->
<table>
<tr>
 <td align="center"><a href="https://github.com/akshay-shrivastava"><img src="https://avatars0.githubusercontent.com/u/26062438?s=460&v=4" width="100px;" alt="Akshay Shrivastava"/><br /><sub><b>Akshay Shrivastava</b></sub></a></td>
  <td align="center"><a href="https://github.com/harshitsilly"><img src="https://avatars1.githubusercontent.com/u/9112946?s=460&v=4" width="100px;" alt="Harshit Sinha"/><br /><sub><b>harshitsilly</b></sub></a></td>
</tr>
</table>
